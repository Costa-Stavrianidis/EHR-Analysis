This file will provide documentation for end users and contributers for the ehr_analysis.py file.

End users/contributors: To parse your EHR data, make sure the raw data is in your working directory, and simply provide the name of the file in string format. If it is not, provide the proper path to your data file. This data file must be in .txt format and tab delimited. The first functions, parse_patient_data and parse_lab_data, will both return a dictionary. The parse_patient_data function will return a dictionary where the keys are patient ID's and the values are the Patient object for that particular patient. The parse_lab_data function will return a dictionary where the keys are patient ID's and the values are a list of Lab objects for that particular patient. The Patient and Lab classes are defined with their attributes above the first two functions. The attributes correspond to specific columns of the data files. The given data file must have a header row as the first, and the header row must have the variables named exactly as defined in the function.

The num_older_than function will return the number of patients older than a certain age (in years). It requires you to enter an age, and then a dictionary of Patient objects, which could be the output of the parse_patient_data function. The output is a single integer. An example of input could be (54, parse_patient_data("filename")), and the output would be 68, which represents how many patients are older than 54.

The sick_patients function will return a unique list of sick patients according to results of a specific lab test. You must input a lab test in string format, ">" or "<", a value for that lab result, and the data in the format of a dictionary of a list of Lab objects (can be the output of the parse_lab_data function). An example of input could be ("URINALYSIS: RED BLOOD CELLS", ">", 1.5, parse_lab_data("filename")) and the output would be a list of every patient ID that has had a this lab test come back greater than a value of 1.5, without repeating patients. 

The admission_age function will return a single integer that represents the age of a specific patient at the time of their first admission. The input must be a patient ID in string format, and then two datasets (one being a dictionary of Patient objects and the other a dictionary of a list of Lab objects). This function will find the admission date for the particular patient that is closest to their DOB (which would be their first admission date), and it will return their age at that time. An example of the input could be ("1A8791E3-A61C-455A-8DEE-763EB90C9B2C", parse_patient_data("filename1"), parse_lab_data("filename2")). This will output 18, which was the age of that patient during their first admission.

Contributors: To test these functions, use the ehr_testing.py file. This file assumes the test datasets are all in the working directory. To test parse_patient_data and parse_lab_data, specific attributes of Patient or Lab objects in the list were checked to make sure they were correct. To test num_older_than, a file with 3 patients was used. All of the patients should have an age above 0, and none of them should be older than 150, which the test confirms. To test sick_patients, specific tests and parameters were used, and then patients that can be confirmed to have a value that fits those parameters for that specific test were checked for inside of the list of patients, which is the output. For the admission_age function, different patients were tested to see their ages at first admission, using the two test datasets.