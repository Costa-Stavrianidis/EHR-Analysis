This file will provide documentation for end users and contributers for the ehr_analysis.py file.

End users/contributors: To parse your EHR data, make sure the raw data is in your working directory, and simply provide the name of the file in string format. If it is not, provide the proper path to your data file. This data file must be in .txt format and tab delimited. The first functions, parse_patient_data and parse_lab_data, will each create a table in a SQLite database called "ehr.db". One will create a Patient table, and the other will create a Lab table. The Patient table has the patient ID as the key value and gender, DOB, and race as variables. The rows are different patients. The Lab table has the patient ID, name of test, value of test, and date of test as variables. The rows are different tests for a particular patient.

The Patient and Lab classes are defined with attributes and properites that can all be taken or calculated from the SQLite Patient or Lab tables. These classes are used in the remaining functions.

The num_older_than function will return the number of patients older than a certain age (in years). It only requires you to enter an age. The output is a single integer. An example of input could be (54), and the output would be 68, which represents how many patients are older than 54.

The sick_patients function will return a unique list of sick patients according to results of a specific lab test. You must input a lab test in string format, ">" or "<", and a value for that lab result. An example of input could be ("URINALYSIS: RED BLOOD CELLS", ">", 1.5) and the output would be a list of every patient ID that has had a this lab test come back greater than a value of 1.5, without repeating patients. 

The admission_age function will return a single integer that represents the age of a specific patient at the time of their first admission. The input must be a patient ID in string format. This function will find the admission date for the particular patient that is closest to their DOB (which would be their first admission date), and it will return their age at that time. An example of the input could be ("1A8791E3-A61C-455A-8DEE-763EB90C9B2C"). This will output 18, which was the age of that patient during their first admission.

Contributors: To test these functions, use the ehr_testing.py file. This file assumes the test datasets are all in the working directory. To test num_older_than, a file with 3 patients was used. All of the patients should have an age above 0, and none of them should be older than 150, which the test confirms. It also confirms that 2 patients are above the age of 52, and 1 is above the age of 60. To test sick_patients, specific tests and parameters were used, and then patients that can be confirmed to have a value that fits those parameters for that specific test were checked for inside of the list of patients, which is the output. For the admission_age function, different patients were tested to see their ages at first admission, using the two test datasets.