This file will provide documentation for end users and contributers for the ehr_analysis.py file.

End users/contributors: To parse your EHR data, make sure the raw data is in your working directory, and simply provide the name of the file in string format. If it is not, provide the proper path to your data file. This data file must be in .txt format and tab delimited. The first function, parse_data, will return a list of lists, with each row of the dataset being a list in the overall list. 

The num_older_than function will return the number of patients older than a certain age (in years). It requires you to enter an age, and then a list of lists, which could be the output of the parse_data function. The output is a single integer. The top row of the list of lists must have all of the variable names, and the DOB column must be labeled exactly "PatientDateOfBirth". An example of input could be (54, parse_data("filename")), and the output would be 68, which represents how many patients are older than 54.

The sick_patients function will return a unique list of sick patients according to results of a specific lab test. You must input a lab test in string format, ">" or "<", a value for that lab result, and the data in the format of a list of lists (can be the output of the parse_data function). The header row of the data must have variables labeled exactly as specified in the comments of the function. An example of input could be ("URINALYSIS: RED BLOOD CELLS", ">", 1.5, parse_data("filename")) and the output would be a list of every patient ID that has had a this lab test come back greater than a value of 1.5, without repeating patients. 

The admission_age function will return a single integer that represents the age of a specific patient at the time of their first admission. The input must be a patient ID in string format, and then two datasets (one with patient DOB inside and one with admission dates). This function will find the admission date for the particular patient that is closest to their DOB (which would be their first admission date), and it will return their age at that time. An example of the input could be ("1A8791E3-A61C-455A-8DEE-763EB90C9B2C", parse_data("filename1"), parse_data("filename2")). This will output 18, which was the age of that patient during their first admission.

Contributors: To test these functions, use the ehr_testing.py file. This file assumes the test datasets are all in the working directory. To test parse_data, specific elements of the list of lists were checked to make sure they were correct. To test num_older_than, a file with 3 patients was used. All of the patients should have an age above 0, and none of them should be older than 150, which the test confirms. To test sick_patients, specific tests and parameters were used, and then patients that can be confirmed to have a value that fits those parameters for that specific test were checked for inside of the list of patients, which is the output. For the admission_age function, different patients were tested to see their ages at first admission, using the two test datasets.